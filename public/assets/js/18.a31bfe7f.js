(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{602:function(t,e,s){t.exports=s.p+"assets/img/开机自动挂载磁盘分区.d9c80ef4.png"},603:function(t,e,s){t.exports=s.p+"assets/img/lost+found.bc1e2d37.png"},711:function(t,e,s){"use strict";s.r(e);var a=s(5),v=Object(a.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"磁盘分区"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#磁盘分区"}},[t._v("#")]),t._v(" 磁盘分区")]),t._v(" "),a("p",[t._v("磁盘"),a("code",[t._v("/dev/vdb")]),t._v("分成2个区，便会得到"),a("code",[t._v("/dev/vdb1")]),t._v("，"),a("code",[t._v("/dev/vdb2")]),t._v("两个分区")]),t._v(" "),a("p",[t._v("利用"),a("code",[t._v("fdisk")]),t._v("工具进行MBR分区，"),a("code",[t._v("fdisk")]),t._v("最大可支持2T的磁盘分区，超过2T的用"),a("code",[t._v("parted")]),t._v("，支持GPT，适用于大容量分区")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("查看现有系统的磁盘空间\n"),a("code",[t._v("fdisk -l")])])]),t._v(" "),a("li",[a("p",[t._v("给/dev/vdb磁盘分区")])])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("fdisk /dev/vdb  // 选中/dev/vdb\n输入m //查看帮助信息\n输入n //新增分区\n输入p //选择基本分区\n输入1 //建1个分区\n回车、再回车\n输入w //保存\n")])])]),a("ol",{attrs:{start:"3"}},[a("li",[a("p",[t._v("同步分区到系统\n"),a("code",[t._v("partprobe")])])]),t._v(" "),a("li",[a("p",[t._v("格式化分区")])])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("//用ext4格式对/dev/vdb1进行格式化\nmkfs.ext4 /dev/vdb1\n")])])]),a("ol",{attrs:{start:"5"}},[a("li",[t._v("挂载分区")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("mkdir /qm //创建新的文件夹，作为挂载点\nmount /dev/vdb1 /qm\ncp -r /abc/* /qm  //将abc文件夹下的内容复制到/qm（如果需要的话）\n")])])]),a("ol",{attrs:{start:"6"}},[a("li",[t._v("查看挂载\n"),a("code",[t._v("df -h")]),t._v("//可以看到/dev/vdb1了")]),t._v(" "),a("li",[t._v("设置开机自动挂载")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("vim /etc/fstab 修改文件,尾部添加`/dev/vdb1 /qm ext4 defaults 0 0`\n")])])]),a("p",[t._v("如果磁盘是根据分区的UUID动态挂载的（如华为云），则需要以下方式设置开机自动挂载\n"),a("img",{attrs:{src:s(602),alt:"开机自动挂载磁盘分区"}})]),t._v(" "),a("p",[t._v("如果重启系统之后发现并没有挂载，检查remote-fs.target服务是否开启，直接影响到fstab开机自动挂载是否生效"),a("br"),t._v("\n解决方案：开启并设置开机自启动就可以了。")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("systemctl start remote-fs.target\nsystemctl enable remote-fs.target\n")])])]),a("p",[t._v("分区后/qm文件夹下会生成一个lost+found的目录")]),t._v(" "),a("p",[a("img",{attrs:{src:s(603),alt:"lost+found"}})])])}),[],!1,null,null,null);e.default=v.exports}}]);